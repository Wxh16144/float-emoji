{"version":3,"sources":["keyword.js","index.js"],"names":["$","str","document","querySelector","myClick","el","fn","addEventListener","elObj","root","phone","header","main","keyword","footer","keywordbg","animation","message","send","inputval","value","pushMessage","HTMLEncode","html","createElement","textContent","innerText","innerHTML","name","ismyself","scrollTop","scrollHeight","find","Object","keys","key","RegExp","test","icon","createAnimation","placeholder","Math","floor","myRandom","length","min","max","random","getBoundingClientRect","width","height","count","top","bottom","round","averageCount","fw","numbercount","logo","Array","isArray","index","style","zIndex","forEach","childEl","left","classList","position","fontSize","transform","transition","setTimeout","target","parentNode","removeChild","appendChild","window"],"mappings":"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","file":"float-emoji.8efba194.js","sourceRoot":"..","sourcesContent":["export default {\n  '么么哒': '😘',\n  '猪': ['🐖', '🐽', '🐷', '🐗'],\n  '爱|love': ['❤', '💕'],\n  '大便|粑粑|屎': '💩',\n  '恭喜发财': '💸'\n}\n","import keyword from './keyword'\nconst $ = str => document.querySelector(str)\nconst myClick = (el = document, fn = () => { }) => el.addEventListener('click', fn)\nconst elObj = {\n  root: $('#root'),\n  phone: $('#phone'),\n  header: $('#header'),\n  main: $('#main'),\n  keyword: $('#keyword'),\n  footer: $('#footer'),\n  keywordbg: $('#main .bg'),\n  animation: $('#animation'),\n  message: $('#message'),\n  send: $('#send')\n}\n// 发送按钮\nmyClick(elObj.send, () => {\n  const inputval = elObj.message.value;\n  inputval && pushMessage(inputval, '我', true)\n  // elObj.message.value = '';\n})\n//HTML转义\nconst HTMLEncode = html => {\n  const el = document.createElement(\"div\");\n  el.textContent ? el.textContent = html : el.innerText = html\n  return el.innerHTML;\n}\n// 追加聊天记录\nconst pushMessage = (str, name, ismyself) => {\n  if (!str) return false;\n  var html = `\n    <p class=\"${ismyself ? 'myself' : 'opposite'}\"\n       style=\"--name:'${name}'\">${HTMLEncode(str)}\n    </p>\n  `\n  elObj.keyword.innerHTML += html;\n  elObj.main.scrollTop = elObj.keyword.scrollHeight\n  // 判断聊天内容有没有关键字\n  const find = Object.keys(keyword).find(key => new RegExp(key, 'ig').test(str))\n  const icon = keyword[find];\n  icon && createAnimation(icon)\n  elObj.keyword.scrollTop = elObj.keyword.scrollHeight;\n  elObj.message.placeholder = Object.keys(keyword)[Math.floor(myRandom(0, Object.keys(keyword).length - 1))]\n  elObj.message.value = ''\n}\n\nconst myRandom = (min = 0, max = min + 1) => Math.random() * (max - min + 1) + min;\n// 动画\nconst createAnimation = icon => {\n  const { width, height, top, bottom } = elObj.main.getBoundingClientRect();\n  const count = Math.round(width * height / 5000);\n  const averageCount = Math.round(width / 65);\n  const fw = width / averageCount;\n  let numbercount = 0;\n  let logo = icon;\n  if (Array.isArray(icon)) {\n    const index = myRandom(0, icon.length - 1)\n    logo = icon[Math.floor(index)];\n  }\n  elObj.animation.style.zIndex = 99;\n  [...Array(count).keys()].forEach(index => {\n    let childEl = document.createElement('i');\n    const left = (myRandom(1, fw) + fw) * (index % averageCount) + 'px';\n    childEl.classList = 'icon-itme';\n    childEl.innerText = logo || '😘'\n    childEl.style.left = left\n    childEl.style.position = 'absolute'\n    childEl.style.fontSize = '32px';\n    childEl.style.transform = `translate(${left},${-50}px)`;\n    childEl.style.transition = `transform ${myRandom(3, 6)}s linear ${myRandom(1, 2)}s`;\n    setTimeout(() => {\n      childEl.style.transform = `translate(${myRandom(1, fw)}px,${height + 50}px) rotate(${myRandom(-90, 90)}deg)`\n    }, 0)\n    // 过渡结束后执行\n    childEl.addEventListener('transitionend', ({ target }) => {\n      target.parentNode.removeChild(target);\n      if (++numbercount >= count) {\n        elObj.animation.style.zIndex = 0\n      }\n    })\n    elObj.animation.appendChild(childEl)\n  })\n\n}\nwindow.keyword = keyword;\n"]}