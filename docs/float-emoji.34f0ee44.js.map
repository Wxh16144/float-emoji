{"version":3,"sources":["keyword.js","index.js"],"names":["$","str","document","querySelector","myClick","el","fn","addEventListener","elObj","root","phone","header","main","keyword","footer","keywordbg","animation","message","send","sendMessage","inputval","value","pushMessage","e","key","keyCode","HTMLEncode","html","createElement","textContent","innerText","innerHTML","name","ismyself","scrollTop","scrollHeight","find","Object","keys","RegExp","test","icon","createAnimation","placeholder","Math","floor","myRandom","length","min","max","random","getBoundingClientRect","width","height","count","top","bottom","round","averageCount","fw","numbercount","logo","Array","isArray","index","style","zIndex","forEach","childEl","left","classList","position","fontSize","transform","transition","setTimeout","target","parentNode","removeChild","appendChild","window"],"mappings":"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","file":"float-emoji.34f0ee44.js","sourceRoot":"..","sourcesContent":["export default {\n  '么么哒': '😘',\n  '猪|pig': ['🐖', '🐽', '🐷', '🐗'],\n  '爱|love': ['❤', '💕'],\n  '大便|粑粑|屎': '💩',\n  '恭喜发财': '💸'\n}\n","import keyword from './keyword'\nconst $ = str => document.querySelector(str)\nconst myClick = (el = document, fn = () => { }) => el.addEventListener('click', fn)\nconst elObj = {\n  root: $('#root'),\n  phone: $('#phone'),\n  header: $('#header'),\n  main: $('#main'),\n  keyword: $('#keyword'),\n  footer: $('#footer'),\n  keywordbg: $('#main .bg'),\n  animation: $('#animation'),\n  message: $('#message'),\n  send: $('#send')\n}\n\nfunction sendMessage() {\n  const inputval = elObj.message.value;\n  inputval && pushMessage(inputval, '我', true)\n}\n\n// 发送按钮\nmyClick(elObj.send, () => sendMessage())\n// fix: https://github.com/Wxh16144/float-emoji/issues/4\nelObj.message.addEventListener('keyup', (e) => {\n  if (e.key === 'Enter' || e.keyCode === 13) {\n    sendMessage()\n  }\n})\n//HTML转义\nconst HTMLEncode = html => {\n  const el = document.createElement(\"div\");\n  el.textContent ? el.textContent = html : el.innerText = html\n  return el.innerHTML;\n}\n// 追加聊天记录\nconst pushMessage = (str, name, ismyself) => {\n  if (!str) return false;\n  var html = `\n    <p class=\"${ismyself ? 'myself' : 'opposite'}\"\n       style=\"--name:'${name}'\">${HTMLEncode(str)}\n    </p >\n  `\n  elObj.keyword.innerHTML += html;\n  elObj.main.scrollTop = elObj.keyword.scrollHeight\n  // 判断聊天内容有没有关键字\n  const find = Object.keys(keyword).find(key => new RegExp(key, 'ig').test(str))\n  const icon = keyword[find];\n  icon && createAnimation(icon)\n  elObj.keyword.scrollTop = elObj.keyword.scrollHeight;\n  elObj.message.placeholder = Object.keys(keyword)[Math.floor(myRandom(0, Object.keys(keyword).length - 1))]\n  elObj.message.value = ''\n}\n\nconst myRandom = (min = 0, max = min + 1) => Math.random() * (max - min + 1) + min;\n// 动画\nconst createAnimation = icon => {\n  const { width, height, top, bottom } = elObj.main.getBoundingClientRect();\n  const count = Math.round(width * height / 5000);\n  const averageCount = Math.round(width / 65);\n  const fw = width / averageCount;\n  let numbercount = 0;\n  let logo = icon;\n  if (Array.isArray(icon)) {\n    const index = myRandom(0, icon.length - 1)\n    logo = icon[Math.floor(index)];\n  }\n  elObj.animation.style.zIndex = 99;\n  [...Array(count).keys()].forEach(index => {\n    let childEl = document.createElement('i');\n    const left = (myRandom(1, fw) + fw) * (index % averageCount) + 'px';\n    childEl.classList = 'icon-itme';\n    childEl.innerText = logo || '😘'\n    childEl.style.left = left\n    childEl.style.position = 'absolute'\n    childEl.style.fontSize = '32px';\n    childEl.style.transform = `translate(${left},${-50}px)`;\n    childEl.style.transition = `transform ${myRandom(3, 6)}s linear ${myRandom(1, 2)}s`;\n    setTimeout(() => {\n      childEl.style.transform = `translate(${myRandom(1, fw)}px,${height + 50}px) rotate(${myRandom(-90, 90)}deg)`\n    }, 0)\n    // 过渡结束后执行\n    childEl.addEventListener('transitionend', ({ target }) => {\n      target.parentNode.removeChild(target);\n      if (++numbercount >= count) {\n        elObj.animation.style.zIndex = 0\n      }\n    })\n    elObj.animation.appendChild(childEl)\n  })\n\n}\nwindow.keyword = keyword;"]}